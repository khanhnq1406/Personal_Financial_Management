syntax = "proto3";

package wealthjourney.user.v1;

import "protobuf/v1/common.proto";
import "protobuf/v1/auth.proto";
import "google/api/annotations.proto";

option go_package = "protobuf/v1";

// User service for user management operations.
service UserService {
  // Get the authenticated user's profile
  rpc GetUser(GetUserRequest) returns (GetUserResponse) {
    option (google.api.http) = {
      get: "/api/v1/users/{userId}"
    };
  }

  // Get a user by email
  rpc GetUserByEmail(GetUserByEmailRequest) returns (GetUserByEmailResponse) {
    option (google.api.http) = {
      get: "/api/v1/users/by-email/{email}"
    };
  }

  // List all users with pagination
  rpc ListUsers(ListUsersRequest) returns (ListUsersResponse) {
    option (google.api.http) = {
      get: "/api/v1/users"
    };
  }

  // Create a new user
  rpc CreateUser(CreateUserRequest) returns (CreateUserResponse) {
    option (google.api.http) = {
      post: "/api/v1/users"
      body: "*"
    };
  }

  // Update user information
  rpc UpdateUser(UpdateUserRequest) returns (UpdateUserResponse) {
    option (google.api.http) = {
      put: "/api/v1/users/{userId}"
      body: "*"
    };
  }

  // Delete a user
  rpc DeleteUser(DeleteUserRequest) returns (DeleteUserResponse) {
    option (google.api.http) = {
      delete: "/api/v1/users/{userId}"
    };
  }
}

// GetUser request
message GetUserRequest {
  int32 userId = 1 [json_name = "userId"];  // User ID from context (authenticated user)
}

// GetUserByEmail request
message GetUserByEmailRequest {
  string email = 1 [json_name = "email"];
}

// ListUsers request
message ListUsersRequest {
  wealthjourney.common.v1.PaginationParams pagination = 1 [json_name = "pagination"];
}

// CreateUser request
message CreateUserRequest {
  string email = 1 [json_name = "email"];
  string name = 2 [json_name = "name"];
  string picture = 3 [json_name = "picture"];
}

// UpdateUser request
message UpdateUserRequest {
  int32 userId = 1 [json_name = "userId"];   // User ID from context (authenticated user)
  string email = 2 [json_name = "email"];
  string name = 3 [json_name = "name"];
  string picture = 4 [json_name = "picture"];
}

// DeleteUser request
message DeleteUserRequest {
  int32 userId = 1 [json_name = "userId"];  // User ID from context (authenticated user)
}

// GetUser response
message GetUserResponse {
  bool success = 1 [json_name = "success"];
  string message = 2 [json_name = "message"];
  wealthjourney.auth.v1.User data = 3 [json_name = "data"];
  string timestamp = 4 [json_name = "timestamp"];
}

// GetUserByEmail response
message GetUserByEmailResponse {
  bool success = 1 [json_name = "success"];
  string message = 2 [json_name = "message"];
  wealthjourney.auth.v1.User data = 3 [json_name = "data"];
  string timestamp = 4 [json_name = "timestamp"];
}

// ListUsers response
message ListUsersResponse {
  bool success = 1 [json_name = "success"];
  string message = 2 [json_name = "message"];
  repeated wealthjourney.auth.v1.User users = 3 [json_name = "users"];
  wealthjourney.common.v1.PaginationResult pagination = 4 [json_name = "pagination"];
  string timestamp = 5 [json_name = "timestamp"];
}

// CreateUser response
message CreateUserResponse {
  bool success = 1 [json_name = "success"];
  string message = 2 [json_name = "message"];
  wealthjourney.auth.v1.User data = 3 [json_name = "data"];
  string timestamp = 4 [json_name = "timestamp"];
}

// UpdateUser response
message UpdateUserResponse {
  bool success = 1 [json_name = "success"];
  string message = 2 [json_name = "message"];
  wealthjourney.auth.v1.User data = 3 [json_name = "data"];
  string timestamp = 4 [json_name = "timestamp"];
}

// DeleteUser response
message DeleteUserResponse {
  bool success = 1 [json_name = "success"];
  string message = 2 [json_name = "message"];
  string timestamp = 3 [json_name = "timestamp"];
}
